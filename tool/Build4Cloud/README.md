# Build4Cloud

## 概要

UKのwarファイルをクラウド用にビルドするツールです。
クラウド環境はデータソースが複数あるため、それに合わせてpersistence.xmlを変更（データソース分のpersistence-unit要素を記述）する必要があります。
このツールは、既存のpersistence.xmlを元に、一時的にクラウド用に書き換えてwarをビルドします。

## 使い方

`binary`フォルダにビルド済みのEXEを置いてあるので、コマンドラインで実行してください。

```
Build4Cloud -d=[datasourcesCount] -p=[projects] -m=[mode]
```

- `-d=[datasourcesCount]`
  - テナント別のデータソースの数を指定。
  - `2` を指定した場合、`UK`, `UK1`, `UK2` の計3つのデータソースとなるので注意。
  - 省略した場合は `1`

- `-p=[projects]`
  - 対象プロジェクトを指定。複数指定する場合は `cloud,com,at`のようにカンマ区切り。
  - 省略した場合は `cloud`

- `-m=[mode]`
  - 動作モードを指定。
    - `build` : ビルドを実行する。ビルド後、自動的に修正したファイルを元に戻す。省略した場合はこれ。
    - `edit` : クラウド用に修正すべきファイルを修正して終わり。ビルドもしないし、修正したファイルはそのまま残る。

対象ソースコードのフォルダは、このEXEの実行位置（ワーキングディレクトリ）から探しにいく仕様。