<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:com="http://xmlns.jcp.org/jsf/component" xmlns:h="http://xmlns.jcp.org/jsf/html">

<body>
   <ui:composition template="../../../../master/base.xhtml">
      <ui:define name="htmlHead">
         <com:ValidatorScript>
            nts.uk.ctx.at.shared.dom.scherec.optitem.OptionalItemName
            nts.uk.ctx.at.shared.dom.scherec.optitem.NumberRangeValue
            nts.uk.ctx.at.shared.dom.scherec.optitem.TimeRangeValue
            nts.uk.ctx.at.shared.dom.scherec.optitem.AmountRangeValue
            nts.uk.ctx.at.shared.dom.scherec.optitem.calculation.FormulaName
            nts.uk.ctx.at.shared.dom.scherec.optitem.UnitOfOptionalItem
            nts.uk.ctx.at.shared.dom.scherec.optitem.DescritionOptionalItem
            nts.uk.ctx.at.shared.dom.scherec.optitem.NoteOptionalItem

            nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemTime
            nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemTimes
            nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemAmount
            nts.uk.ctx.at.shared.dom.common.anyitem.AnyTimesMonth
            nts.uk.ctx.at.shared.dom.common.anyitem.AnyTimeMonth
            nts.uk.ctx.at.shared.dom.common.anyitem.AnyAmountMonth
         </com:ValidatorScript>
         <com:scriptfile path="/view/language/select/languagemasterselect-jquery-ext.js" of="nts.uk.com.web" />
         <com:stylefile path="/view/language/select/languagemasterselect.css" of="nts.uk.com.web" />
         <com:scriptfile set="IGNITE" />
         <com:stylefile path="kmk002.a.style.css" />
         <com:scriptfile path="kmk002.a.start.js" />
         <com:scriptfile path="kmk002.a.service.js" />
         <com:scriptfile path="kmk002.a.vm.js" />
      </ui:define>
      <ui:define name="content">
         <com:ko tag="with" bind="optionalItemHeader">
            <div id="functions-area">
               <div class="container">
                  <button tabindex="1" class="proceed" data-bind="click: saveOptionalItemDetail, enable: hasSelected &amp;&amp; $root.errors.isEmpty">
                     #{i18n.getText('KMK002_1')}</button>
                  <!-- Print Excel -->
                  <button tabindex="1" id="print-button"
                     data-bind="click: function(){ $vm.exportExcel()}">#{i18n.getText('KMK002_99')}</button>
                  <div tabindex="1" id="switch-language" data-bind="visible: false"></div>
               </div>
            </div>
            <div id="contents-area" style="display: none" data-bind="visible: true" class="fixed-flex-layout">
               <!-- Optional item grid list. -->
               <div class="opt-item-grid-list pull-left caret-right caret-background bg-green fixed-flex-layout-left">
                  <i class="icon icon-searchbox"></i>
                  <div tabindex="1" data-bind="ntsSearchBox: {
                        targetKey: 'itemNo',
                        mode:'igGrid',
                        comId:'tbl-master-list',
                        items: optionalItemHeaders,
                        selected: selectedCode,
                        selectedKey: 'itemNo',
                        fields: ['itemNo', 'itemName']}"></div>
                  <table tabindex="1" id="tbl-master-list" data-bind="ntsGridList: {
                        name: '#[KMK002_6]',
                        width: 380,
                        dataSource: optionalItemHeaders,
                        optionsValue: 'itemNo',
                        columns: columns,
                        multiple: false,
                        value: selectedCode,
                        rows: 15}">
                  </table>
               </div>
               <!-- Optional Item view model -->
               <div class="pull-left opt-item-detail fixed-flex-layout-right">
                  <com:ko tag="with" bind="optionalItem">
                     <div class="table optional-item">
                        <div class="cell">
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: true, constraint: 'OptionalItemName'}">#{i18n.getText('KMK002_11')}</div>
                              <input id="inpName"
                                     data-bind="ntsTextEditor: {
                                                   name: '#[KMK002_12]',
                                                   value: optionalItemName,
                                                   constraint: 'OptionalItemName',
                                                   enable: $parent.hasSelected,
                                                   required: true
                                                }" />
                           </div>
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_101')}</div>
                              <div data-bind="ntsSwitchButton: {
                                                name: '#[KMK002_102]',
                                                options: usageClsDatasource,
                                                optionsValue: 'code',
                                                optionsText: 'name',
                                                value: usageAtr,
                                                required: true,
                                                enable: ko.computed(function() { return $parent.hasSelected() &amp;&amp; $parents[1].langJP(); }, this )
                                             }"/>
                           </div>
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_13')}</div>
                              <div data-bind="ntsSwitchButton: {
                                                name: '#[KMK002_13]',
                                                options: calculationAtr,
                                                optionsValue: 'code',
                                                optionsText: 'name',
                                                value: selectedClac,
                                                enable: ko.computed(function() { return usageAtr() === 1 &amp;&amp; $parent.hasSelected() &amp;&amp; $parents[1].langJP(); }, this )
                                             }"/>
                           </div>
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_20')}</div>
                              <div data-bind="ntsSwitchButton: {
                                                name: '#[KMK002_21]',
                                                options: perfClsDatasource,
                                                optionsValue: 'code',
                                                optionsText: 'name',
                                                value: performanceAtr,
                                                enable: ko.computed(function() { return usageAtr() === 1 &amp;&amp; $parents[1].langJP(); }, this )
                                             }"/>
                           </div>
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_24')}</div>
                              <div style="width: 80px;"
                                   data-bind="ntsComboBox: {
                                                name: '#[KMK002_24]',
                                                options: atrDataSource,
                                                optionsValue: 'value',
                                                value: optionalItemAtr,
                                                optionsText: 'localizedName',
                                                editable: false,
                                                enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                                columns: [
                                                   { prop: 'localizedName', length: 2 },
                                                ]
                                             }"/>
                           </div>
                           <div class="control-group valign-center" data-bind="if: selectedClac() == 0 &amp;&amp; performanceAtr() == 1 &amp;&amp; optionalItemAtr() == 1">
                              <div data-bind="ntsFormLabel: {required: false}">#{i18n.getText('KMK002_130')}</div>
                              <div data-bind="ntsCheckBox: {
                                                   name: '#[KMK002_131]',
                                                   checked: enableUnit,
                                                   enable: usageAtr() == 1 &amp;&amp; $parents[1].langJP(),
                                                   text: nts.uk.resource.getText('KMK002_131')
                                             }"/>
                           </div>
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: false, constraint: 'UnitOfOptionalItem'}">#{i18n.getText('KMK002_75')}</div>
                              <input id="inp-unit"
                                     data-bind="ntsTextEditor: {
                                                   name: '#[KMK002_75]',
                                                   value: unit,
                                                   enable: usageAtr() === 1 &amp;&amp; optionalItemAtr() !== 0 &amp;&amp; !enableUnit() &amp;&amp; $parents[1].langJP(),
                                                   constraint: 'UnitOfOptionalItem',
                                                   required: false
                                                }"/>
                           </div>
                           <div>
                              <div class="ntsControl" style="width: 199px;"/>
                              <div class="text-center ntsControl" style="width: 132px;">#{i18n.getText('KMK002_115')}</div>
                              <div class="text-center ntsControl" style="width: 132px;">#{i18n.getText('KMK002_116')}</div>
                           </div>
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: false}">#{i18n.getText('KMK002_25')}</div>
                              <div id="cb-upper"
                                   data-bind="ntsCheckBox: {
                                                   name: '#[KMK002_26]',
                                                   checked: calcResultRange.upperCheck,
                                                   enable: usageAtr() === 1 &amp;&amp; !enableUnit() &amp;&amp; $parents[1].langJP(),
                                                   text: nts.uk.resource.getText('KMK002_26')
                                                }"/>
                              <div class="ntsControl">
                                 <com:ko tag="if" bind="isNumberSelected()">
                                    <!-- A3_21 -->
                                    <input id="inp-upper-number-day"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_26]',
                                                         value: calcResultRange.numberUpperDay,
                                                         constraint: 'AnyItemTimes',
                                                         required: isUpperRequiredDay,
                                                         option: {
                                                            grouplength: 3,
                                                            decimallength: 2
                                                         },
                                                         enable: enableUpperDay() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isAmountSelected()">
                                    <!-- A3_26 -->
                                    <input id="inp-upper-amount-day"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_26]',
                                                         value: calcResultRange.amountUpperDay,
                                                         constraint: 'AnyItemAmount',
                                                         required: isUpperRequiredDay,
                                                         option: {
                                                            grouplength: 3
                                                         },
                                                         enable: enableUpperDay() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isTimeSelected()">
                                    <!-- A3_28 -->
                                    <input id="inp-upper-time-day"
                                           data-bind="ntsTimeEditor: {
                                                         name: '#[KMK002_26]',
                                                         value: calcResultRange.timeUpperDay,
                                                         constraint: 'AnyItemTime',
                                                         required: isUpperRequiredDay,
                                                         inputFormat: 'time',
                                                         mode: 'time',
                                                         enable: enableUpperDay() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                              </div>
                              <div class="ntsControl">
                                 <com:ko tag="if" bind="isNumberSelected()">
                                    <!-- A3_30 -->
                                    <input id="inp-upper-number-month"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_26]',
                                                         value: calcResultRange.numberUpperMonth,
                                                         constraint: 'AnyTimesMonth',
                                                         required: isUpperRequiredMonth,
                                                         option: {
                                                            grouplength: 3,
                                                            decimallength: 2
                                                         },
                                                         enable: enableUpperMonth() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isAmountSelected()">
                                    <!-- A3_32 -->
                                    <input id="inp-upper-amount-month"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_26]',
                                                         value: calcResultRange.amountUpperMonth,
                                                         constraint: 'AnyAmountMonth',
                                                         required: isUpperRequiredMonth,
                                                         option: {
                                                            grouplength: 3
                                                         },
                                                         enable: enableUpperMonth() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isTimeSelected()">
                                    <!-- A3_34 -->
                                    <input id="inp-upper-time-month"
                                           data-bind="ntsTimeEditor: {
                                                         name: '#[KMK002_26]',
                                                         value: calcResultRange.timeUpperMonth,
                                                         constraint: 'AnyTimeMonth',
                                                         required: isUpperRequiredMonth,
                                                         inputFormat: 'time',
                                                         mode: 'time',
                                                         enable: enableUpperMonth() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                              </div>
                           </div>
                           <div class="control-group valign-center">
                              <div class="form-label"/>
                              <div id="cb-lower"
                                   data-bind="ntsCheckBox: {
                                                   name: '#[KMK002_27]',
                                                   checked: calcResultRange.lowerCheck,
                                                   enable: usageAtr() === 1 &amp;&amp; !enableUnit() &amp;&amp; $parents[1].langJP(),
                                                   text: nts.uk.resource.getText('KMK002_27')
                                                }"/>
                              <div class="ntsControl">
                                 <com:ko tag="if" bind="isNumberSelected()">
                                    <!-- A3_23 -->
                                    <input id="inp-lower-number-day"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.numberLowerDay,
                                                         constraint: 'AnyItemTimes',
                                                         required: isLowerRequiredDay,
                                                         option: {
                                                            grouplength: 3,
                                                            decimallength: 2
                                                         },
                                                         enable: enableLowerDay() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isTimeSelected()">
                                    <!-- A3_27 -->
                                    <input id="inp-lower-time-day"
                                           data-bind="ntsTimeEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.timeLowerDay,
                                                         constraint: 'AnyItemTime',
                                                         required: isLowerRequiredDay,
                                                         inputFormat: 'time',
                                                         mode: 'time',
                                                         enable: enableLowerDay() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isAmountSelected()">
                                    <!-- A3_29 -->
                                    <input id="inp-lower-amount-day"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.amountLowerDay,
                                                         constraint: 'AnyItemAmount',
                                                         required: isLowerRequiredDay,
                                                         option: {
                                                            grouplength: 3
                                                         },
                                                         enable: enableLowerDay() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                              </div>
                              <div class="ntsControl">
                                 <com:ko tag="if" bind="isNumberSelected()">
                                    <!-- A3_31 -->
                                    <input id="inp-lower-number-month"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.numberLowerMonth,
                                                         constraint: 'AnyTimesMonth',
                                                         required: isLowerRequiredMonth,
                                                         option: {
                                                            grouplength: 3,
                                                            decimallength: 2
                                                         },
                                                         enable: enableLowerMonth() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isTimeSelected()">
                                    <!-- A3_33 -->
                                    <input id="inp-lower-time-month"
                                           data-bind="ntsTimeEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.timeLowerMonth,
                                                         constraint: 'AnyTimeMonth',
                                                         required: isLowerRequiredMonth,
                                                         inputFormat: 'time',
                                                         mode: 'time',
                                                         enable: enableLowerMonth() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                                 <com:ko tag="if" bind="isAmountSelected()">
                                    <!-- A3_35 -->
                                    <input id="inp-lower-amount-month"
                                           data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.amountLowerMonth,
                                                         constraint: 'AnyAmountMonth',
                                                         required: isLowerRequiredMonth,
                                                         option: {
                                                            grouplength: 3
                                                         },
                                                         enable: enableLowerMonth() &amp;&amp; $parents[1].langJP()
                                                   }" />
                                 </com:ko>
                              </div>
                           </div>
                           <div class="control-group valign-center">
                              <div data-bind="ntsFormLabel: {required: false}">#{i18n.getText('KMK002_140')}</div>
                              <com:ko tag="if" bind="isTimeSelected()">
                                 <!-- A8_2 A8_3 -->
                                 <div style="width: 80px"
                                      data-bind="ntsComboBox: {
                                                      name: '#[KMK002_140]',
                                                      options: [
                                                         {value: 0, localizedName: nts.uk.resource.getText('KMK002_141')},
                                                         {value: 1, localizedName: nts.uk.resource.getText('KMK002_142')},
                                                         {value: 2, localizedName: nts.uk.resource.getText('KMK002_143')},
                                                         {value: 3, localizedName: nts.uk.resource.getText('KMK002_144')},
                                                         {value: 4, localizedName: nts.uk.resource.getText('KMK002_145')},
                                                         {value: 5, localizedName: nts.uk.resource.getText('KMK002_146')}
                                                      ],
                                                      visibleItemsCount: 6,
                                                      optionsValue: 'value',
                                                      value: calcResultRange.timeInputUnit,
                                                      optionsText: 'localizedName',
                                                      editable: false,
                                                      enable: usageAtr() === 1 &amp;&amp; selectedClac() == 0 &amp;&amp; performanceAtr() == 1 &amp;&amp; !enableUnit() &amp;&amp; $parents[1].langJP(),
                                                      columns: [
                                                         { prop: 'localizedName', length: 2 },
                                                      ]}">
                                 </div>
                                 <!-- A8_8 -->
                                 <span class="label" data-bind="text: nts.uk.resource.getText('KMK002_171')"/>
                              </com:ko>
                              <com:ko tag="if" bind="isNumberSelected()">
                                 <!-- A8_4 A8_5 -->
                                 <div style="width: 80px"
                                      data-bind="ntsComboBox: {
                                                      name: '#[KMK002_140]',
                                                      options: [
                                                         {value: 0, localizedName: nts.uk.resource.getText('KMK002_150')},
                                                         {value: 1, localizedName: nts.uk.resource.getText('KMK002_151')},
                                                         {value: 2, localizedName: nts.uk.resource.getText('KMK002_152')},
                                                         {value: 3, localizedName: nts.uk.resource.getText('KMK002_153')}
                                                      ],
                                                      visibleItemsCount: 4,
                                                      optionsValue: 'value',
                                                      value: calcResultRange.numberInputUnit,
                                                      optionsText: 'localizedName',
                                                      editable: false,
                                                      enable: usageAtr() === 1 &amp;&amp; selectedClac() == 0 &amp;&amp; performanceAtr() == 1 &amp;&amp; !enableUnit() &amp;&amp; $parents[1].langJP(),
                                                      columns: [
                                                         { prop: 'localizedName', length: 2 },
                                                      ]}">
                                 </div>
                                 <!-- A8_8 -->
                                 <span class="label" data-bind="text: unit"/>
                              </com:ko>
                              <com:ko tag="if" bind="isAmountSelected()">
                                 <!-- A8_6 A8_7 -->
                                 <div style="width: 80px"
                                      data-bind="ntsComboBox: {
                                                      name: '#[KMK002_140]',
                                                      options: [
                                                         {value: 0, localizedName: nts.uk.resource.getText('KMK002_160')},
                                                         {value: 1, localizedName: nts.uk.resource.getText('KMK002_161')},
                                                         {value: 2, localizedName: nts.uk.resource.getText('KMK002_162')},
                                                         {value: 3, localizedName: nts.uk.resource.getText('KMK002_163')},
                                                         {value: 4, localizedName: nts.uk.resource.getText('KMK002_164')}
                                                      ],
                                                      visibleItemsCount: 5,
                                                      optionsValue: 'value',
                                                      value: calcResultRange.amountInputUnit,
                                                      optionsText: 'localizedName',
                                                      editable: false,
                                                      enable: usageAtr() === 1 &amp;&amp; selectedClac() == 0 &amp;&amp; performanceAtr() == 1 &amp;&amp; !enableUnit() &amp;&amp; $parents[1].langJP(),
                                                      columns: [
                                                         { prop: 'localizedName', length: 2 },
                                                      ]}">
                                 </div>
                                 <!-- A8_8 -->
                                 <span class="label" data-bind="text: unit"/>
                              </com:ko>
                           </div>
                        </div>
                        <div class="cell">
                           <div class="control-group valign-top">
                              <div style="width: 60px;" data-bind="ntsFormLabel: {required: false, constraint: 'DescritionOptionalItem'}">#{i18n.getText('KMK002_105')}</div>
                              <textarea id="description"
                                        rows="3"
                                        data-bind="ntsMultilineEditor: {
                                                      value: description,
                                                      constraint: 'DescritionOptionalItem',
                                                      name: '#[KMK002_106]',
                                                      required: false,
                                                      enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                                      option: {
                                                         width: '300'
                                                      }
                                                   }"/>
                           </div>
                           <div class="control-group valign-top">
                              <div style="width: 60px;" data-bind="ntsFormLabel: {required: false, constraint: 'NoteOptionalItem'}">#{i18n.getText('KMK002_107')}</div>
                              <textarea rows="8"
                                        data-bind="ntsMultilineEditor: {
                                                      value: note,
                                                      constraint: 'NoteOptionalItem',
                                                      name: '#[KMK002_108]',
                                                      enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                                      option: {
                                                         width: '300'
                                                      }
                                                   }"/>
                           </div>
                        </div>
                     </div>
                     <hr />
                     <div class="control-group valign-center" style="margin-top: 15px;">
                        <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_16')}</div>
                        <div data-bind="ntsSwitchButton: {
                                             name: '#[KMK002_16]',
                                             options: empConClsDatasource,
                                             optionsValue: 'code',
                                             optionsText: 'name',
                                             value: empConditionAtr,
                                             enable: ko.computed(function() { return usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; $parents[1].langJP(); })
                                 }"/>
                        <button data-bind="click: openDialogB, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; empConditionAtr() == 1 &amp;&amp; $parents[1].langJP()">#{i18n.getText('KMK002_19')}</button>
                     </div>
                     <div class="control-group valign-center">
                        <button data-bind="click: addFormulaAbove, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; $parents[1].langJP()">#{i18n.getText('KMK002_28')}</button>
                        <button data-bind="click: addFormulaBelow, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; $parents[1].langJP()">#{i18n.getText('KMK002_29')}</button>
                        <button data-bind="click: removeFormula, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; hasSelectedFormula() &amp;&amp; $parents[1].langJP()" class="danger">#{i18n.getText('KMK002_30')}</button>
                     </div>
                     <div class="control-group valign-center">
                        <span>#{i18n.getText('KMK002_31')}</span>
                        <input style="width: 700px; margin-left: 18px;"
                               id="inp-apply-formula"
                               data-bind="ntsTextEditor: {
                                             value: applyFormula,
                                             enable: isUsed() &amp;&amp; $parents[1].langJP(),
                                             readonly: true,
                                             required: false
                                          }" />
                     </div>
                     <!-- Optional Item formula view model -->
                     <table id="tbl-calc-formula" data-bind="name: '#[KMK002_32]'">
                        <colgroup>
                           <col width="35px" />
                           <col width="38px" />
                           <col width="145px" />
                           <col width="157px" />
                           <col width="207px" />
                           <col width="35px" />
                           <col width="157px" />
                           <col width="105px" />
                           <col width="145px" />
                           <col width="105px" />
                           <col width="145px" />
                        </colgroup>
                        <thead>
                           <tr>
                              <th class="ui-widget-header p-5008">
                                 <div tabindex="-1" data-bind="ntsCheckBox: {
                                       checked: checkedAllFormula,
                                       enable: isUsed() &amp;&amp; selectedClac() === 1 &amp;&amp; calcFormulas().length > 0,
                                       text: '' }"></div>
                              </th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_33')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_24')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_34')}</th>
                              <th colspan="3" class="ui-widget-header">#{i18n.getText('KMK002_35')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_36')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_37')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_38')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_39')}</th>
                           </tr>
                        </thead>
                        <tbody>
                           <com:ko tag="foreach" bind="calcFormulas">
                              <tr>
                                 <td class="p-5008">
                                    <div tabindex="-1" data-bind="ntsCheckBox: {
                                          checked: selected,
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          text: '' }"></div>
                                 </td>
                                 <td style="text-align: right" data-bind="text: symbolValue"></td>
                                 <td>
                                    <div tabindex="2" style="width: 80px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_24]',
                                          options: formulaAtrDs,
                                          optionsValue: 'value',
                                          value: formulaAtr,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                    </div>
                                 </td>
                                 <td><input tabindex="2" class="inp-formula-required" data-bind="attr: {'id': 'formulaName' + ($index() + 1)},
                                    ntsTextEditor: {
                                       name: '#[KMK002_40]',
                                       value: formulaName,
                                       enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                       constraint: 'FormulaName',
                                       option: {width: '130'},
                                       required: true}" />
                                 </td>
                                 <td>
                                    <div tabindex="2" data-bind="ntsSwitchButton: {
                                          name: '#[KMK002_41]',
                                          options: calcAtrDs,
                                          optionsValue: 'value',
                                          optionsText: 'localizedName',
                                          value: calcAtr,
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1
                                       }">
                                    </div>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="!isFormulaSettingSelected()">
                                       <button tabindex="2" class="btn-calc-set"
                                          data-bind="click: openDialogC, enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1"></button>
                                    </com:ko>
                                    <com:ko tag="if" bind="isFormulaSettingSelected()">
                                       <button tabindex="2" class="btn-calc-set"
                                          data-bind="click: openDialogD, enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1"></button>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <input class="inp-formula-required" data-bind="attr: {'id': 'settingResult' + ($index() + 1)},
                                       ntsTextEditor: {
                                          name: '#[KMK002_35]',
                                          value: settingResult,
                                          readonly: true,
                                          enable: $parent.isUsed, 
                                          required: true}" />
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_36]',
                                          options: timeUnitDs,
                                          optionsValue: 'value',
                                          value: timeDailyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_36]',
                                          options: amountUnitDs,
                                          optionsValue: 'value',
                                          value: amountDailyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_36]',
                                          options: numberUnitDs,
                                          optionsValue: 'value',
                                          value: numberDailyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_37]',
                                          options: timeRoundingDailyDs,
                                          optionsValue: 'value',
                                          value: timeDailyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_37]',
                                          options: numberRoundingDs,
                                          optionsValue: 'value',
                                          value: numberDailyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_37]',
                                          options: amountRoundingDs,
                                          optionsValue: 'value',
                                          value: amountDailyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_38]',
                                          options: timeUnitDs,
                                          optionsValue: 'value',
                                          value: timeMonthlyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_38]',
                                          options: numberUnitDs,
                                          optionsValue: 'value',
                                          value: numberMonthlyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_38]',
                                          options: amountUnitDs,
                                          optionsValue: 'value',
                                          value: amountMonthlyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_39]',
                                          options: timeRoundingMonthlyDs,
                                          optionsValue: 'value',
                                          value: timeMonthlyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_39]',
                                          options: numberRoundingDs,
                                          optionsValue: 'value',
                                          value: numberMonthlyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_39]',
                                          options: amountRoundingDs,
                                          optionsValue: 'value',
                                          value: amountMonthlyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                              </tr>
                           </com:ko>
                        </tbody>
                     </table>
                  </com:ko>
               </div>
            </div>
         </com:ko>
      </ui:define>
   </ui:composition>
</body>

</html>